<html lang="en">

<head>

  <meta charset="UTF-8">

  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <meta http-equiv="X-UA-Compatible" content="ie=edge">

  <title>FriendFinder Survey</title>

  <!-- Latest compiled and minified CSS & JS -->
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css">
  <script src="https://code.jquery.com/jquery.js"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js"></script>

  <!-- Font Awesome icons -->
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.1/css/font-awesome.min.css">

  <!-- Chosen -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/chosen/1.5.1/chosen.css">
  <script src="https://cdnjs.cloudflare.com/ajax/libs/chosen/1.5.1/chosen.jquery.min.js"></script>

</head>



<body>

  <div class="container">

    <h2>Survey Questions</h2>
    <hr>

    <h3><strong>About You</strong></h3>
    <h4>Name (Required)</h4>
    <input type="text" id="name" class="form-control" required>

    <h4>Link to Photo Image (Required)</h4>
    <input type="text" id="photo" class="form-control" required>

    <h4>What is your favorite programing language?(Required)</h4>
    <input type="text" id="favLang" class="form-control" required>

    <h4>Link to your GitHub or portfolio(Optional)</h4>
    <input type="text" id="gitLink" class="form-control">

    <hr>

          <!-- First Question -->

    <h2><strong>Question 1</strong></h2>

    <!-- Display the question to the user -->
    <h3>Your mind is always buzzing with unexplored ideas and plans.</h3>

    <!-- Drop down list of options for the user to choosen from (1 thru 5*)-->
    <select class="chosen-select" id="Q1">

        
      <option value=""></option>

      <option value="1">1 (Strongly Disagree)</option>

      <option value="2">2</option>

      <option value="3">3</option>

      <option value="4">4</option>

      <option value="5">5 (Strongly Agree)</option>

    </select>

    <!-- Second Question -->

    <h2><strong>Question 2</strong></h2>

    <!-- Display the question to the user -->
    <h3>Generally speaking, you rely more on your experience than your imagination.</h3>

    <!-- Drop down list of options for the user to choosen from (1 thru 5*)-->
    <select class="chosen-select" id="Q2">

      <option value=""></option>

      <option value="1">1 (Strongly Disagree)</option>

      <option value="2">2</option>

      <option value="3">3</option>

      <option value="4">4</option>

      <option value="5">5 (Strongly Agree)</option>

    </select>


        <!-- Third Question -->

    <h2><strong>Question 3</strong></h2>

    <!-- Display the question to the user -->
    <h3>You find it easy to stay relaxed and focused even when there is some pressure.</h3>

    <!-- Drop down list of options for the user to choosen from (1 thru 5*)-->
    <select class="chosen-select" id="Q3">

      <option value=""></option>

      <option value="1">1 (Strongly Disagree)</option>

      <option value="2">2</option>

      <option value="3">3</option>

      <option value="4">4</option>

      <option value="5">5 (Strongly Agree)</option>

    </select>

      <!-- Fourth Question -->

    <h2><strong>Question 4</strong></h2>

    <!-- Display the question to the user -->
    <h3>You rarely do something just out of sheer curiosity.</h3>

    <!-- Drop down list of options for the user to choosen from (1 thru 5*)-->
    <select class="chosen-select" id="Q4">

      <option value=""></option>

      <option value="1">1 (Strongly Disagree)</option>

      <option value="2">2</option>

      <option value="3">3</option>

      <option value="4">4</option>

      <option value="5">5 (Strongly Agree)</option>

    </select>


       <!-- Fifth Question -->

    <h2><strong>Question 5</strong></h2>

    <!-- Display the question to the user -->
    <h3>You are well experienced with version control programs such as Github</h3>

    <!-- Drop down list of options for the user to choosen from (1 thru 5*)-->
    <select class="chosen-select" id="Q5">

      <option value=""></option>

      <option value="1">1 (Strongly Disagree)</option>

      <option value="2">2</option>

      <option value="3">3</option>

      <option value="4">4</option>

      <option value="5">5 (Strongly Agree)</option>

    </select>


       <!-- Sixth Question -->

    <h2><strong>Question 6</strong></h2>

    <!-- Display the question to the user -->
    <h3>You beleive pseudo coding is important in all code</h3>

    <!-- Drop down list of options for the user to choosen from (1 thru 5*)-->
    <select class="chosen-select" id="Q6">

      <option value=""></option>

      <option value="1">1 (Strongly Disagree)</option>

      <option value="2">2</option>

      <option value="3">3</option>

      <option value="4">4</option>

      <option value="5">5 (Strongly Agree)</option>

    </select>

       <!-- Seventh Question -->


    <h2><strong>Question 7</strong></h2>

    <!-- Display the question to the user -->
    <h3>In a discussion, truth should be more important than people’s sensitivities.</h3>

    <!-- Drop down list of options for the user to choosen from (1 thru 5*)-->
    <select class="chosen-select" id="Q7">

      <option value=""></option>

      <option value="1">1 (Strongly Disagree)</option>

      <option value="2">2</option>

      <option value="3">3</option>

      <option value="4">4</option>

      <option value="5">5 (Strongly Agree)</option>

    </select>

        <!-- Eighth Question -->

    <h2><strong>Question 8</strong></h2>

    <!-- Display the question to the user -->
    <h3>You prefer to work on the backend programming the night away</h3>

    <!-- Drop down list of options for the user to choosen from (1 thru 5*)-->
    <select class="chosen-select" id="Q8">

      <option value=""></option>

      <option value="1">1 (Strongly Disagree)</option>

      <option value="2">2</option>

      <option value="3">3</option>

      <option value="4">4</option>

      <option value="5">5 (Strongly Agree)</option>

    </select>

        <!-- Ninth Question -->

    <h2><strong>Question 9</strong></h2>

    <!-- Display the question to the user -->
    <h3>You think that everyone’s views should be respected regardless of whether they are supported by facts or not.</h3>

    <!-- Drop down list of options for the user to choosen from (1 thru 5*)-->
    <select class="chosen-select" id="Q9">

      <option value=""></option>

      <option value="1">1 (Strongly Disagree)</option>

      <option value="2">2</option>

      <option value="3">3</option>

      <option value="4">4</option>

      <option value="5">5 (Strongly Agree)</option>

    </select>

        <!-- Tenth Question -->

    <h2><strong>Question 10</strong></h2>

    <!-- Display the question to the user -->
    <h3>Prefer frontend programing and languages</h3>

    <!-- Drop down list of options for the user to choosen from (1 thru 5*)-->
    <select class="chosen-select" id="Q10">

      <option value=""></option>

      <option value="1">1 (Strongly Disagree)</option>

      <option value="2">2</option>

      <option value="3">3</option>

      <option value="4">4</option>

      <option value="5">5 (Strongly Agree)</option>

    </select>

    <br>
    <br>

    <!-- Submit Button -->
    <button type="submit" class="btn btn-primary btn-lg btn-block" id="submit"><i class="fa fa-check-circle" aria-hidden="true"></i>
     Submit</button>

    <hr>
    <footer class="footer">

      <div class="container">

        <p>
            <!-- Referencing the APIs made in the api routes js file -->
            <a href="/api/pals">API Friends List</a> | <a href="https://github.com/Timwestberg/FriendFinder">GitHub Repo</a>
        
        </p>

      </div>

    </footer>

  </div>

  <!-- Modal to be displayed to the user -->
  <div id="results-modal" class="modal fade" role="dialog">

    <div class="modal-dialog">

      <!-- Modal content including thhe user's best match information-->
      <div class="modal-content">

        <!-- Head of the modal showing the title of the selection -->
        <div class="modal-header">

          <button type="button" class="close" data-dismiss="modal">&times;</button>

          <h2 class="modal-title">
            
            <strong>Best Match</strong>
          
          </h2>

        </div>

        <!-- Body of the modal || rendered data pulls into name, photo, favorite coding langauge and possibly portolfio link? -->
        <div class="modal-body">

          <h2 id="match-name"></h2>

          <img id="match-img" src="" alt="Coder's Image">

          <h3 id="match-lang"></h3>
          
          <h3 id="match-github"></h3>

        </div>

        <!-- Footer of the modal || Contains the close button of the form, for the user to exit after viewing their match -->
        <div class="modal-footer">

          <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>

        </div>

      </div>

    </div>

  </div>



  <script type="text/javascript">

    // Capture the form inputs
    $("#submit").on("click", function(event) {

      event.preventDefault();

      // Form validation
      function validateForm() {

        let isValid = true;
        
        // Create a for loop for all class with form-conrol to make sure there was a suiteable answer inputed by user || Bootstrap
        $(".form-control").each(function() {

          if ($(this).val() === "") {

            isValid = false;

          }

        });

        // Create a for loop for all class with chosen-select to make sure there was a suiteable answer inputed by user || Non Bootstrap
        $(".chosen-select").each(function() {

          if ($(this).val() === "") {

            isValid = false;

          }

        });
        //  If all input fields on the form are acceptable allow the application to move on 
        return isValid;
      }

      // If all required fields are filled allow the post to continue|| if not stop the process before another express function runs
      if (validateForm()) {

        // Create an object for the user's score || This placing the pal's data from the form and plugs it into an identical structure as set in html routes js file
        let palData = {

        // Variable storing the name of the user
          name: $("#name").val(), 
          
        // Variable storing the photo from the user
          photo: $("#photo").val(),

        // Variable for storing the user's favorite coding language
          favLang: $("#favLang").val(),

        // Variable for storing the github link if the User decides to include it
          github: $("#gitLink").val(),
        
        // Variable for storing the user's answer to the questions in the survey-form
          scores: [

            $("#Q1").val(),

            $("#Q2").val(),

            $("#Q3").val(),

            $("#Q4").val(),

            $("#Q5").val(),

            $("#Q6").val(),

            $("#Q7").val(),

            $("#Q8").val(),

            $("#Q9").val(),

            $("#Q10").val()

          ]

        };

        console.log(palData)

        // AJAX post the data to the pals API.
        $.post("/api/friends", palData, function(data) {

          // Grab the result from the AJAX post so that the best match's name and photo are displayed.
          $("#match-name").text(data.name);

          $("#match-img").attr("src", data.photo);

          $("#match-lang").text(data.favLang);

          $("match-github").text(data.github);



          // Show the modal with the best match
          $("#results-modal").modal("toggle");

        });

      } else {

        //   if not stop the process before another express function runs
        alert("Please fill out all fields before submitting!");

      }

    });

  </script>

</body>

</html>